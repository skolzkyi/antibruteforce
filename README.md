# Antibruteforce
Сервис предназначен для борьбы с подбором паролей при авторизации в какой-либо системе.
Сервис вызывается перед авторизацией пользователя и может либо разрешить, либо заблокировать попытку.
Cервис используется только для server-server, т.е. скрыт от конечного пользователя.

# Алгоритм работы
Сервис ограничивает частоту попыток авторизации для различных комбинаций параметров, например:

не более N = 10 попыток в минуту для данного логина.
не более M = 100 попыток в минуту для данного пароля (защита от обратного brute-force).
не более K = 1000 попыток в минуту для данного IP (число большое, т.к. NAT).

Параметры N,M и K задаются через переменные в файле конфигурации ./configs/dc/config.env:
LIMITFACTOR_LOGIN
LIMITFACTOR_PASSWORD
LIMITFACTOR_IP

Временной промежуток хранения частоты попыток в рамках одного измерения задается через параметр LIMIT_TIMECHECK.

Бакеты для подсчета количества попыток хранятся в Redis.

Частью микросервиса является БД MySQL,в ней хранятся подсети для black/white списков.
Если входящий IP находится в whitelist, то сервис безусловно разрешает авторизацию (ok=true).
Если - в blacklist, то отклоняет (ok=false).

# Развертывание
Развертывание микросервиса осуществляется командой make run (внутри docker compose up) в директории с проектом.
Для проекта предусмотрен CLI-интерфейс, он находится в папке ./bin
CLI-интерфейс не контейнеризирован, позволяет управлять сервисом внутри docker compose.
Настройки CLI-интерфейса находятся в файле конфигурации ./configs/config_cli.env

# Тестирование
Unit-тестирование производится с помощью команды make test.
Интеграционное тестирование производится с помощью команды  make integration-tests. 
При интеграционном тестировании поднимается тестовое окружение в docker compose, прогоняются интеграционные тесты,
в случае ошибки возвращается значение 1, иначе 0.

Релизный вывод интеграционных тестов:


